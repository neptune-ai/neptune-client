name: Publish
on:
  release:
    workflows: ["Lint", "Test"]
    types: [created]
jobs:
  pypi:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.8

#      - name: Build and test
#        run: |
#          python setup.py sdist
#
#      - name: Publish package
#        uses: pypa/gh-action-pypi-publish@54b39fb9371c0b3a6f9f14bb8a67394defc7a806
#        with:
#          user: __token__
#          password: ${{ secrets.PYPI_API_TOKEN }}
